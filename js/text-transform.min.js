function escapeHTML(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}window.TextTransform={el:null,inFormats:[],outFormats:[],ready:function(t){"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)},mount:function(t,e,s){this.el="string"==typeof t?document.querySelector(t):t,this.inFormats=e,this.outFormats=s,this.render()},render:function(){var s;this.el&&(s='<div class="tt-side tt-side-from"><div class="tt-side-header"><span>FROM:</span><select class="tt-select tt-from">',0<this.inFormats.length?this.inFormats.forEach(function(t,e){s+='<option value="'+escapeHTML(e)+'"'+(0==e?" selected":"")+">"+escapeHTML(t.name)+"</option>"}):s+='<option value="0">Default input format</option>',s+='</select></div><div class="tt-side-body"><textarea class="tt-textarea tt-input"></textarea></div></div><div class="tt-side tt-side-to"><div class="tt-side-header"><span>TO:</span><select class="tt-select tt-to">',0<this.outFormats.length?this.outFormats.forEach(function(t,e){s+='<option value="'+escapeHTML(e)+'"'+(0==e?" selected":"")+">"+escapeHTML(t.name)+"</option>"}):s+='<option value="0">Default output format</option>',s+='</select></div><div class="tt-side-body"><textarea class="tt-textarea tt-output" readonly></textarea></div></div>',this.el.innerHTML=s,this.el.classList.add("text-transform"),this.raf(this.addListeners.bind(this)))},raf:function(t){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;e?e(t):setTimeout(t,100)},addListeners:function(){this.el.querySelector(".tt-input").addEventListener("input",this.update.bind(this)),this.el.querySelector(".tt-from").addEventListener("change",this.update.bind(this)),this.el.querySelector(".tt-to").addEventListener("change",this.update.bind(this)),this.update()},updating:!1,requiresUpdate:!1,update:function(){var t;this.updating?this.requiresUpdate=!0:(this.updating=!0,this.el.querySelector(".tt-output").classList.remove("tt-error"),t=this.el.querySelector(".tt-input").value+"",this.updateInput(t))},endUpdate:function(){this.updating=!1,this.requiresUpdate&&(this.requiresUpdate=!1,this.update())},updateInput:function(t){try{var e=parseInt(this.el.querySelector(".tt-from").value,10),s=this.inFormats[e]&&"function"==typeof this.inFormats[e].parser?this.inFormats[e].parser(t):t}catch(t){return this.endUpdate(),this.el.querySelector(".tt-output").value="Error [Input] => "+t.message,void this.el.querySelector(".tt-output").classList.add("tt-error")}window.Promise&&s instanceof Promise?s.then(this.updateOutput.bind(this)).catch(function(t){this.endUpdate(),this.el.querySelector(".tt-output").value="Error [Input] => "+t.message,this.el.querySelector(".tt-output").classList.add("tt-error")}.bind(this)):this.updateOutput(s)},updateOutput:function(t){try{var e=parseInt(this.el.querySelector(".tt-to").value,10),s=this.outFormats[e]&&"function"==typeof this.outFormats[e].formatter?this.outFormats[e].formatter(t):t}catch(t){return this.endUpdate(),this.el.querySelector(".tt-output").value="Error [Output] => "+t.message,void this.el.querySelector(".tt-output").classList.add("tt-error")}window.Promise&&s instanceof Promise?s.then(this.updateFinish.bind(this)).catch(function(t){this.endUpdate(),this.el.querySelector(".tt-output").value="Error [Output] => "+t.message,this.el.querySelector(".tt-output").classList.add("tt-error")}.bind(this)):this.updateFinish(s)},updateFinish:function(t){this.el.querySelector(".tt-output").value=t+"",this.endUpdate()}};